{% extends "layout.html" %}

{% block header %}
    <h2 class="my-4 text-center" style="color:rgb(13, 110, 253);">Top 5 {{ category | title }} Headlines</h2>
{% endblock %}

{% block body %}

    <div class="container">
        <!-- Search Section -->
                <form method="POST" class="mb-4 p-4 bg-light rounded shadow-sm">
                    <h2 class="h4 mb-3 text-secondary">Select a Category:</h2>
                    <div class="mb-3">
                        <label for="category" class="form-label">Category</label>
                        <select name="category" id="category" class="form-select">
                            <option value="" disabled selected>Pick an option</option>
                            {% for item in listitems %}
                                <option value="{{ item }}" {% if item == category %}selected{% endif %}>{{ item.capitalize() }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Get Headlines</button>
                </form>
    </div>


    <div class="container">
        <!-- Form Section (Remove Later) -->
                <form method="POST" class="mb-4 p-4 bg-light rounded shadow-sm">
                    <h2 class="h4 mb-3 text-secondary">Select a Category:</h2>
                    <div class="mb-3">
                        <label for="category" class="form-label">Category</label>
                        <select name="category" id="category" class="form-select">
                            <option value="" disabled selected>Pick an option</option>
                            {% for item in listitems %}
                                <option value="{{ item }}" {% if item == category %}selected{% endif %}>{{ item.capitalize() }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Get Headlines</button>
                </form>

        <!-- Headlines Section (will be displayed once POST request is made) -->
            {% if articles %}
                <div class="list-group">
                    {% for article in articles %}
                        <a href="{{ article.url }}" class="list-group-item list-group-item-action list-group-item-light mb-2 shadow-sm" target="_blank">
                            <h5 class="mb-1">{{ article.title }}</h5>
                            <p class="mb-1 text-muted">{{ article.description[:150] }}...</p>
                        </a>
                    {% endfor %}
                </div>
            {% endif %}






        <!-- Error Message (if any) -->
        {% if error %}
            <div class="alert alert-danger mt-4" role="alert">
                {{ error }}
            </div>
        {% endif %}
    </div>
{% endblock %}